<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SLD - Domain Mixture Scaling Law - gemini-cli + Gemini 3 Pro Preview</title>
    <link rel="icon" type="image/png" href="assets/sld_logo.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&family=Sora:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <style>
      :root {
        --bg-primary: #ffffff;
        --bg-secondary: #f8f9fa;
        --accent-primary: #2563eb;
        --accent-secondary: #3b82f6;
        --accent-gradient: linear-gradient(135deg, #2563eb 0%, #3b82f6 50%, #60a5fa 100%);
        --text-primary: #1f2937;
        --text-secondary: #4b5563;
        --border-subtle: rgba(0, 0, 0, 0.1);
        --glass-bg: rgba(0, 0, 0, 0.02);
        --success: #10b981;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family:
          "Sora",
          -apple-system,
          BlinkMacSystemFont,
          sans-serif;
        background: var(--bg-primary);
        min-height: 100vh;
        color: var(--text-primary);
      }

      .bg-pattern {
        display: none;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
        position: relative;
        z-index: 1;
      }

      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--accent-primary);
        text-decoration: none;
        font-size: 0.9rem;
        margin-bottom: 1.5rem;
        transition: color 0.2s;
      }

      .back-link:hover {
        color: var(--accent-secondary);
      }

      .header {
        background: var(--glass-bg);
        border: 1px solid var(--border-subtle);
        border-radius: 16px;
        padding: 2rem;
        margin-bottom: 2rem;
        backdrop-filter: blur(10px);
      }

      .header h1 {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        background: var(--accent-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .meta-row {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-top: 1rem;
      }

      .meta-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .meta-label {
        color: var(--text-secondary);
        font-size: 0.85rem;
      }

      .meta-value {
        font-weight: 600;
        color: var(--text-primary);
      }

      .r2-badge {
        display: inline-block;
        padding: 0.3rem 0.6rem;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.85rem;
        font-family: "JetBrains Mono", monospace;
      }

      .section-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-primary);
      }

      .runs-container {
        display: flex;
        flex-direction: column;
        gap: 1rem;
      }

      .run-card {
        background: var(--glass-bg);
        border: 1px solid var(--border-subtle);
        border-radius: 12px;
        overflow: hidden;
        transition: border-color 0.2s;
      }

      .run-card:hover {
        border-color: rgba(99, 102, 241, 0.3);
      }

      .run-card.best-run {
        border-color: var(--success);
        box-shadow: 0 0 20px rgba(16, 185, 129, 0.1);
      }

      .run-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1rem 1.25rem;
        background: rgba(255, 255, 255, 0.02);
        cursor: pointer;
        transition: background 0.2s;
      }

      .run-header:hover {
        background: rgba(255, 255, 255, 0.04);
      }

      .run-info {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .run-badge {
        padding: 0.25rem 0.6rem;
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
      }

      .run-badge.best-badge {
        background: var(--success);
        color: white;
      }

      .run-label {
        font-weight: 500;
        color: var(--text-primary);
      }

      .expand-icon {
        color: var(--text-muted);
        font-size: 0.8rem;
        transition: transform 0.2s;
      }

      .run-header.expanded .expand-icon {
        transform: rotate(180deg);
      }

      .run-content {
        border-top: 1px solid var(--border-subtle);
      }

      .code-container {
        overflow: hidden;
      }

      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1.25rem;
        background: rgba(0, 0, 0, 0.2);
        border-bottom: 1px solid var(--border-subtle);
        font-size: 0.8rem;
        color: var(--text-muted);
      }

      .copy-btn {
        padding: 0.35rem 0.75rem;
        background: rgba(99, 102, 241, 0.2);
        border: 1px solid rgba(99, 102, 241, 0.3);
        border-radius: 6px;
        color: var(--accent-primary);
        font-size: 0.75rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        font-family: inherit;
      }

      .copy-btn:hover {
        background: rgba(99, 102, 241, 0.3);
      }

      .code-container pre {
        margin: 0;
        padding: 1.25rem;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
        line-height: 1.6;
        overflow-x: auto;
        background: transparent !important;
      }

      .footer {
        text-align: center;
        margin-top: 3rem;
        padding-top: 2rem;
        border-top: 1px solid var(--border-subtle);
        color: var(--text-secondary);
        font-size: 0.85rem;
      }

      .footer a {
        color: var(--accent-primary);
        text-decoration: none;
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .header h1 {
          font-size: 1.25rem;
        }

        .meta-row {
          flex-direction: column;
          gap: 0.75rem;
        }

        .run-info {
          flex-wrap: wrap;
          gap: 0.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="bg-pattern"></div>

    <div class="container">
      <a href="sld_index.html" class="back-link"> ← Back to Leaderboard </a>

      <div class="header">
        <h1>Domain Mixture Scaling Law</h1>
        <div class="meta-row">
          <div class="meta-item">
            <span class="meta-label">Agent:</span>
            <span class="meta-value">gemini-cli</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Model:</span>
            <span class="meta-value">Gemini 3 Pro Preview</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Best R²:</span>
            <span class="r2-badge" style="background-color: #006400; color: white"> 0.989423 </span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Mean R²:</span>
            <span class="meta-value">0.980138</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Min R²:</span>
            <span class="meta-value">0.970854</span>
          </div>
          <div class="meta-item">
            <span class="meta-label">Runs:</span>
            <span class="meta-value">2</span>
          </div>
        </div>
      </div>

      <h2 class="section-title">All Runs (sorted by R²)</h2>

      <div class="runs-container">
        <div class="run-card best-run">
          <div class="run-header" onclick="toggleRun(this)">
            <div class="run-info">
              <span class="run-badge best-badge">Best</span>
              <span class="run-label">Run 1</span>
              <span class="r2-badge" style="background-color: #006400; color: white"> R² = 0.989423 </span>
            </div>
            <span class="expand-icon">▼</span>
          </div>
          <div class="run-content" style="display: block">
            <div class="code-container">
              <div class="code-header">
                <span>Python</span>
                <button class="copy-btn" onclick="copyCode(event, 'code-0')">Copy</button>
              </div>
              <pre><code class="language-python" id="code-0">import numpy as np

def law(input_data: list[dict[str, float]], group: str) -&gt; list[dict[str, float]]:
    &quot;&quot;&quot;
    Predicts output variables based on input variables according to a discovered scaling law.

    Args:
        input_data: A list of dictionaries, where each dictionary is a single data
                    point containing input variable names as keys and their
                    corresponding values.
        group: The name of the experimental group for which to make predictions.
                The functional form of the law must be the same for all groups,
                but the constant parameters/coefficients can differ per group.

    Returns:
        A list of dictionaries, corresponding to the input_data list, with each
        dictionary containing the predicted output variable(s).
    &quot;&quot;&quot;
    
    # Fitted parameters for each group
    # Model: L_i = A * (sum_j T_ij * p_j)^(-alpha) + C
    PARAMS = {
  &quot;70M&quot;: {
    &quot;loss_domain_1&quot;: {
      &quot;A&quot;: 1.4238451169174666,
      &quot;alpha&quot;: 0.09398513070233284,
      &quot;C&quot;: 1.1250493207278296,
      &quot;T&quot;: [
        1.0,
        0.0028653843430912034,
        0.0,
        0.006560914041313572,
        0.007218091947616502
      ]
    },
    &quot;loss_domain_2&quot;: {
      &quot;A&quot;: 1.6028897145876133,
      &quot;alpha&quot;: 0.18249317423847652,
      &quot;C&quot;: 1.7098198790278034,
      &quot;T&quot;: [
        0.13978044088307642,
        1.0,
        0.2888140021128257,
        0.09238120511024654,
        0.2702341876935682
      ]
    },
    &quot;loss_domain_3&quot;: {
      &quot;A&quot;: 1.3944974988308458,
      &quot;alpha&quot;: 0.07536985492525757,
      &quot;C&quot;: 1.4540031052227687,
      &quot;T&quot;: [
        0.00042972756094378624,
        0.004428392340713848,
        1.0,
        0.0015108566548276629,
        0.004618708293329572
      ]
    },
    &quot;loss_domain_4&quot;: {
      &quot;A&quot;: 0.7156208007948365,
      &quot;alpha&quot;: 0.14819891555573603,
      &quot;C&quot;: 0.7188126729944071,
      &quot;T&quot;: [
        0.004709723482930698,
        0.0,
        0.007159224662733469,
        1.0,
        0.006354517927118956
      ]
    },
    &quot;loss_domain_5&quot;: {
      &quot;A&quot;: 1.6903071983073346,
      &quot;alpha&quot;: 0.07574314873996338,
      &quot;C&quot;: 1.7459964167978976,
      &quot;T&quot;: [
        0.0,
        0.1294716976819937,
        0.09092332659047013,
        0.014567119409274644,
        1.0
      ]
    }
  },
  &quot;160M&quot;: {
    &quot;loss_domain_1&quot;: {
      &quot;A&quot;: 1.167794250478621,
      &quot;alpha&quot;: 0.09893031045785339,
      &quot;C&quot;: 1.0967302669578558,
      &quot;T&quot;: [
        1.0,
        0.0,
        0.0,
        0.004702404391421327,
        0.006374420575153449
      ]
    },
    &quot;loss_domain_2&quot;: {
      &quot;A&quot;: 1.520792165137527,
      &quot;alpha&quot;: 0.19100210139002716,
      &quot;C&quot;: 1.4717790036178258,
      &quot;T&quot;: [
        0.14117673959388272,
        1.0,
        0.30984366873545993,
        0.09323203270576641,
        0.2930905074144338
      ]
    },
    &quot;loss_domain_3&quot;: {
      &quot;A&quot;: 1.1827621056082325,
      &quot;alpha&quot;: 0.08515955574666216,
      &quot;C&quot;: 1.3810689151399624,
      &quot;T&quot;: [
        0.0004496159377778205,
        0.005469210248664284,
        1.0,
        0.00014486145067144012,
        0.005546525753692289
      ]
    },
    &quot;loss_domain_4&quot;: {
      &quot;A&quot;: 0.5950466323744031,
      &quot;alpha&quot;: 0.15657006642589474,
      &quot;C&quot;: 0.6274992666731508,
      &quot;T&quot;: [
        0.0038211623746128476,
        0.0,
        0.004047765748103023,
        1.0,
        0.006932201209717277
      ]
    },
    &quot;loss_domain_5&quot;: {
      &quot;A&quot;: 1.5374892790861532,
      &quot;alpha&quot;: 0.08558831045269366,
      &quot;C&quot;: 1.546810504279026,
      &quot;T&quot;: [
        0.010196510229647623,
        0.04817027475788599,
        0.0331566521815975,
        0.07622206331237742,
        1.0
      ]
    }
  },
  &quot;305M&quot;: {
    &quot;loss_domain_1&quot;: {
      &quot;A&quot;: 1.0636633714879822,
      &quot;alpha&quot;: 0.1022580547558815,
      &quot;C&quot;: 1.0643051121057456,
      &quot;T&quot;: [
        1.0,
        0.0020628543899588276,
        0.0,
        0.005055971810713113,
        0.005517181906203229
      ]
    },
    &quot;loss_domain_2&quot;: {
      &quot;A&quot;: 1.5091813171571034,
      &quot;alpha&quot;: 0.21086460000369067,
      &quot;C&quot;: 1.317332273323408,
      &quot;T&quot;: [
        0.1761437051777317,
        1.0,
        0.328313250063059,
        0.12228845673566739,
        0.3242993594399039
      ]
    },
    &quot;loss_domain_3&quot;: {
      &quot;A&quot;: 1.2930356452032414,
      &quot;alpha&quot;: 0.06407715343277973,
      &quot;C&quot;: 1.1862706116692965,
      &quot;T&quot;: [
        0.00010662729851481288,
        0.0016648522472207873,
        1.0,
        0.0,
        0.002186394372089585
      ]
    },
    &quot;loss_domain_4&quot;: {
      &quot;A&quot;: 0.5311234622127226,
      &quot;alpha&quot;: 0.16396855241073996,
      &quot;C&quot;: 0.5956951080126597,
      &quot;T&quot;: [
        0.0007484858832986562,
        0.0,
        0.0020986448436579866,
        1.0,
        0.0074776280923507365
      ]
    },
    &quot;loss_domain_5&quot;: {
      &quot;A&quot;: 1.4576330665204935,
      &quot;alpha&quot;: 0.08684367375738934,
      &quot;C&quot;: 1.4616723046222218,
      &quot;T&quot;: [
        0.0,
        0.04878929729092485,
        0.027998535239229693,
        0.07915718776179,
        1.0
      ]
    }
  },
  &quot;410M&quot;: {
    &quot;loss_domain_1&quot;: {
      &quot;A&quot;: 1.0716651256430547,
      &quot;alpha&quot;: 0.0979215135041499,
      &quot;C&quot;: 1.0023484878829527,
      &quot;T&quot;: [
        1.0,
        0.0,
        0.0,
        0.003578328625604031,
        0.00520215592199023
      ]
    },
    &quot;loss_domain_2&quot;: {
      &quot;A&quot;: 1.4082722528529894,
      &quot;alpha&quot;: 0.21260676990383326,
      &quot;C&quot;: 1.3641437773794949,
      &quot;T&quot;: [
        0.16418103324714028,
        1.0,
        0.37481870992512745,
        0.09587346431048725,
        0.32578174634303375
      ]
    },
    &quot;loss_domain_3&quot;: {
      &quot;A&quot;: 1.3149711554737487,
      &quot;alpha&quot;: 0.062094311988635076,
      &quot;C&quot;: 1.1032193950712292,
      &quot;T&quot;: [
        0.0,
        0.001564258864235631,
        1.0,
        8.56970983439856e-05,
        0.0018986297882148968
      ]
    },
    &quot;loss_domain_4&quot;: {
      &quot;A&quot;: 0.49842678668584145,
      &quot;alpha&quot;: 0.1778525216820956,
      &quot;C&quot;: 0.5822681110448701,
      &quot;T&quot;: [
        0.0060231123550343905,
        0.0007592880970631944,
        0.0026719690465761368,
        1.0,
        0.0086213744689824
      ]
    },
    &quot;loss_domain_5&quot;: {
      &quot;A&quot;: 3.233311673093248,
      &quot;alpha&quot;: 0.04148885832669186,
      &quot;C&quot;: -0.39223243148328407,
      &quot;T&quot;: [
        0.01291802719802647,
        0.0,
        0.3021193873339115,
        0.0,
        1.0
      ]
    }
  }
}

    if group not in PARAMS:
        raise ValueError(f&quot;Unknown group: {group}&quot;)
        
    group_params = PARAMS[group]
    predictions = []
    
    for item in input_data:
        pred_item = {}
        
        # Extract proportions vector p
        # Assuming keys are &#x27;proportion_domain_1&#x27; to &#x27;proportion_domain_5&#x27;
        p = np.array([
            item.get(&#x27;proportion_domain_1&#x27;, 0.0),
            item.get(&#x27;proportion_domain_2&#x27;, 0.0),
            item.get(&#x27;proportion_domain_3&#x27;, 0.0),
            item.get(&#x27;proportion_domain_4&#x27;, 0.0),
            item.get(&#x27;proportion_domain_5&#x27;, 0.0)
        ])
        
        # Compute loss for each domain
        for i in range(1, 6):
            domain_key = f&quot;loss_domain_{i}&quot;
            if domain_key in group_params:
                params = group_params[domain_key]
                A = params[&quot;A&quot;]
                alpha = params[&quot;alpha&quot;]
                C = params[&quot;C&quot;]
                T = np.array(params[&quot;T&quot;])
                
                # Effective proportion
                p_eff = np.dot(p, T)
                # Handle effectively zero
                p_eff = max(p_eff, 1e-9)
                
                loss_pred = A * (p_eff ** -alpha) + C
                pred_item[domain_key] = loss_pred
                
        predictions.append(pred_item)
        
    return predictions</code></pre>
            </div>
          </div>
        </div>

        <div class="run-card">
          <div class="run-header" onclick="toggleRun(this)">
            <div class="run-info">
              <span class="run-badge">#2</span>
              <span class="run-label">Run 2</span>
              <span class="r2-badge" style="background-color: #006400; color: white"> R² = 0.970854 </span>
            </div>
            <span class="expand-icon">▼</span>
          </div>
          <div class="run-content" style="display: none">
            <div class="code-container">
              <div class="code-header">
                <span>Python</span>
                <button class="copy-btn" onclick="copyCode(event, 'code-1')">Copy</button>
              </div>
              <pre><code class="language-python" id="code-1">import math

def law(input_data: list[dict[str, float]], group: str) -&gt; list[dict[str, float]]:
    &quot;&quot;&quot;
    Predicts output variables based on input variables according to a discovered scaling law.

    Args:
        input_data: A list of dictionaries, where each dictionary is a single data
                    point containing input variable names as keys and their
                    corresponding values.
        group: The name of the experimental group for which to make predictions.
                The functional form of the law must be the same for all groups,
                but the constant parameters/coefficients can differ per group.

    Returns:
        A list of dictionaries, corresponding to the input_data list, with each
        dictionary containing the predicted output variable(s).
    &quot;&quot;&quot;
    
    # Parameters fitted: L = c0 + c1 * (p + c2)^(-c3)
    # params structure: group -&gt; domain -&gt; [c0, c1, c2, c3]
    params = {
    &#x27;70M&#x27;: {
        &#x27;loss_domain_1&#x27;: [9.049791064506775e-16, 2.544863255075162, 0.005023335215394096, 0.055546740330062044],
        &#x27;loss_domain_2&#x27;: [2.7486656945851666, 0.8246899154131252, 0.010080775042703558, 0.05659733424323028],
        &#x27;loss_domain_3&#x27;: [5.985319537346353e-07, 2.9005808574645533, 0.001151070479839812, 0.031946298634857095],
        &#x27;loss_domain_4&#x27;: [1.2590153991726705, 0.21220778772640178, 0.011700299738268685, 0.3501422357655192],
        &#x27;loss_domain_5&#x27;: [3.2198538792667297, 0.23277138740838701, 0.10173862328204047, 0.48926338453846824],
    },
    &#x27;160M&#x27;: {
        &#x27;loss_domain_1&#x27;: [7.921177091134831e-11, 2.2603061159513467, 0.0038345630816795984, 0.05446415324935802],
        &#x27;loss_domain_2&#x27;: [2.4461406598589988, 0.8195058967138309, 0.0038249028744246735, 0.04037177211421319],
        &#x27;loss_domain_3&#x27;: [7.510940516965377e-07, 2.631246343363198, 0.00094573078880027, 0.03188902494410328],
        &#x27;loss_domain_4&#x27;: [8.674987985071811e-15, 1.2132115807783543, 0.003771920704982149, 0.0862384287195669],
        &#x27;loss_domain_5&#x27;: [4.666662783752345e-17, 3.0865366503919907, 0.03318950890733831, 0.04470214262740694],
    },
    &#x27;305M&#x27;: {
        &#x27;loss_domain_1&#x27;: [4.63396739841804e-14, 2.123388567522197, 0.0034713501822073336, 0.05491740702600626],
        &#x27;loss_domain_2&#x27;: [2.3349069954135566, 0.7673802246129325, 0.006222133135954493, 0.04638693162532186],
        &#x27;loss_domain_3&#x27;: [6.593427727187525e-13, 2.510346003736797, 0.00052546156955814, 0.030293831005327836],
        &#x27;loss_domain_4&#x27;: [4.9747859075972676e-08, 1.117572915518561, 0.003698166118962751, 0.08835480936682777],
        &#x27;loss_domain_5&#x27;: [1.2908709077742297, 1.6311412445258724, 0.03310495146187288, 0.08014352579523258],
    },
    &#x27;410M&#x27;: {
        &#x27;loss_domain_1&#x27;: [6.45159383764858e-15, 2.0701727493297715, 0.0030243803942285714, 0.05400686896572349],
        &#x27;loss_domain_2&#x27;: [2.2870399938680213, 0.7634132483462176, 0.0017345344382877009, 0.033273045391567696],
        &#x27;loss_domain_3&#x27;: [3.4557544039691014e-07, 2.4440410784149362, 0.0005010731785675117, 0.03121240344669886],
        &#x27;loss_domain_4&#x27;: [0.7411064514872984, 0.35914458865064114, 0.007467419826885272, 0.21677194222721097],
        &#x27;loss_domain_5&#x27;: [4.776331691474593e-12, 2.8437345217824648, 0.0273606303463639, 0.047494879619303806],
    },
}
    
    if group not in params:
        raise ValueError(f&quot;Unknown group: {group}&quot;)
        
    group_params = params[group]
    predictions = []
    
    for row in input_data:
        pred_row = {}
        for d in range(1, 6):
            input_key = f&quot;proportion_domain_{d}&quot;
            output_key = f&quot;loss_domain_{d}&quot;
            
            p = row.get(input_key, 0.0)
            
            # Retrieve parameters for this domain
            c0, c1, c2, c3 = group_params[output_key]
            
            # Calculate L = c0 + c1 * (p + c2)^(-c3)
            # Use math.pow for single scalar power
            loss = c0 + c1 * math.pow(p + c2, -c3)
            
            pred_row[output_key] = loss
            
        predictions.append(pred_row)
        
    return predictions</code></pre>
            </div>
          </div>
        </div>
      </div>

      <footer class="footer">
        <p>
          SLDBench | <a href="https://arxiv.org/abs/2507.21184" target="_blank">arXiv:2507.21184</a> |
          <a href="https://github.com/linhaowei1/SLD" target="_blank">GitHub</a>
        </p>
      </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
    <script>
      function toggleRun(header) {
        const content = header.nextElementSibling;
        const isExpanded = content.style.display === "block";
        content.style.display = isExpanded ? "none" : "block";
        header.classList.toggle("expanded", !isExpanded);
      }

      function copyCode(event, codeId) {
        event.stopPropagation();
        const code = document.getElementById(codeId).textContent;
        navigator.clipboard.writeText(code).then(() => {
          const btn = event.target;
          btn.textContent = "Copied!";
          setTimeout(() => (btn.textContent = "Copy"), 2000);
        });
      }

      Prism.highlightAll();
    </script>
  </body>
</html>
